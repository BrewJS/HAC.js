<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Brew.js: Welcome to Brew.js! - Nintendo Switch version</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Banner.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Brew.js
   &#160;<span id="projectnumber">2.0 - beta 1</span>
   </div>
   <div id="projectbrief">C++ userland JavaScript API for Nintendo homebrew - Nintendo Switch documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Welcome to Brew.js! - Nintendo Switch version </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Welcome to the documentation of Brew.js for Nintendo Switch!</b></p>
<h2>The engine: duktape</h2>
<ul>
<li>Duktape is an embeddable Javascript engine, with a focus on portability and compact footprint, as it's described on its <a href="https://github.com/svaarala/duktape">GitHub page</a>.</li>
<li>It supports ES5 almost entirely, and a few elements of ES6. It has Node.js Buffer bindings and TypedArray from ES2015, plus a partial support of ECMAScript E6 and E7.</li>
<li>You can use duktape's functions from the code along with Brew.js API, but it's very unstable and it could fuck up the execution, so be sure to know what you're doing.</li>
</ul>
<h2>Nintendo Switch: specifications</h2>
<ul>
<li>Nintendo Switch build of Brew.js libs has some specific modules:<ul>
<li><code>nx</code> - Basic functions and constants for the Nintendo Switch system</li>
<li><code>gfx</code> - Framebuffer drawing, a bit slow (but better than SDL2)</li>
<li>Specific <code>console</code> and <code>input</code> modules</li>
</ul>
</li>
</ul>
<h2>Basic examples of API usage</h2>
<ul>
<li><p class="startli">If you just want to evaluate quickly some sources, it's easy to do:</p>
<p class="startli">``` cpp #include &lt;Brew.js/Brew.hpp&gt; ```</p><ul>
<li>First of all, include the main header to use Brew.js</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line">Brew::API::NativeContext context = Brew::API::createContext();</div><div class="line">Brew::Environment myenv(context);</div></div><!-- fragment --><ul>
<li>Then, we create a environment, and context to use with our environment.</li>
</ul>
<div class="fragment"><div class="line">Brew::ExecutionResult res1 = myenv.evaluateSourceCode(&quot;var x = 9;&quot;);</div><div class="line">Brew::executionResult res2 = myenv.evaluateFile(&quot;sdmc:/test.js&quot;);</div><div class="line">vector&lt;Brew::Projects&gt; projects = myenv.getProjectList(&quot;sdmc:/Projects&quot;);</div><div class="line">Brew::ExecutionResult res3 = myenv.evaluateProject(projects[0]);</div></div><!-- fragment --><ul>
<li><p class="startli">There are 3 possibilities of evaluating code:</p><ul>
<li>Evaluating directly source code</li>
<li>Evaluating code from a file</li>
<li>Evaluating a Brew.js/Node.js project</li>
</ul>
<p class="startli">All of them return a execution result, which has information such as if there was any error or the result's type.</p>
</li>
</ul>
<p>In case you want to extend the API:</p>
<p>``` cpp #include &lt;Brew.js/Brew.hpp&gt; ```</p>
<ul>
<li>First of all, include the main header to use Brew.js</li>
</ul>
<div class="fragment"><div class="line">Brew::API::Function myFunction(Brew::API::NativeContext Context)</div><div class="line">{</div><div class="line">    Brew::API::FunctionHandler handler(Context);</div><div class="line">    if(handler.checkArgc(2))</div><div class="line">    {</div><div class="line">        string one = handler.getString(0);</div><div class="line">        string two = handler.getString(0);</div><div class="line">        string result = one + two;</div><div class="line">        handler.pushString(result);</div><div class="line">    }</div><div class="line">    else handler.throwError(Brew::Error::ReferenceError, &quot;This needs two strings!&quot;);</div><div class="line">    return Brew::API::Return::Variable;</div><div class="line">}</div></div><!-- fragment --><ul>
<li>To understand this API JS function better, here is the same function in JavaScript:</li>
</ul>
<div class="fragment"><div class="line">function myFunction()</div><div class="line">{</div><div class="line">    // Note that FunctionHandler::checkArgc() means &quot;higher or equal&quot;</div><div class="line">    // Use FunctionHandler::checkArgcEqual() for only equal.</div><div class="line">    if(arguments.length &gt;= 2)</div><div class="line">    {</div><div class="line">        var one = arguments[0];</div><div class="line">        var two = arguments[1];</div><div class="line">        var result = one + two;</div><div class="line">        return result;</div><div class="line">    }</div><div class="line">    else throw new ReferenceError(&quot;This needs two strings!&quot;);</div><div class="line">}</div></div><!-- fragment --><ul>
<li>For more specific information, check the documentation of the different C++ elements.</li>
<li><b>IMPORTANT</b>: Don't add anything to the global object after having created a environment. Modules can be added as they are processed on runtime, but the global object is created and initialized when creating a environment.</li>
<li>Then, after making our API JS function, we should add it to the JS context. How do we do that? There are several possibilities:</li>
</ul>
<div class="fragment"><div class="line">// - Option 1: Create a module and add it to &#39;require&#39; module list</div><div class="line">// First we need to create a module and add the function</div><div class="line">Brew::API::Module myModule(&quot;mymodule&quot;);</div><div class="line">myModule.pushFunction(&quot;myFunction&quot;, myFunction);</div><div class="line">Brew::API::addModule(myModule);</div><div class="line">// Now we could do: require(&#39;mymodule&#39;).myFunction(&#39;one&#39;, &#39;two&#39;)</div><div class="line"></div><div class="line">// - Option 2: Create a module and add it as a global object</div><div class="line">// We start the same way as in option 1</div><div class="line">Brew::API::Module myModule(&quot;mymodule&quot;);</div><div class="line">myModule.pushFunction(&quot;myFunction&quot;, myFunction);</div><div class="line">// But we add the module to the global object</div><div class="line">Brew::API::Global.pushModule(myModule);</div><div class="line">// Now we could do: mymodule.myFunction(&#39;one&#39;, &#39;two&#39;)</div><div class="line"></div><div class="line">// - Option 3: Add the function directly to the global object</div><div class="line">Brew::API::Global.pushFunction(&quot;myFunction&quot;, myFunction);</div></div><!-- fragment --><ul>
<li>Note that it's preferred to add it via a module, as it's still unsafe and usually fails to add objects directly to the global object.</li>
<li>You can also add different elements to the global object or to modules:</li>
</ul>
<div class="fragment"><div class="line">Brew::API::Module example(&quot;example&quot;);</div><div class="line">// require(&#39;example&#39;).Name -&gt; XorTroll</div><div class="line">example.pushString(&quot;Name&quot;, &quot;XorTroll&quot;);</div><div class="line">// require(&#39;example&#39;).IsBoy -&gt; true</div><div class="line">example.pushBoolean(&quot;IsBoy&quot;, true);</div><div class="line">// require(&#39;example&#39;).Year -&gt; 2018</div><div class="line">example.pushUInt(&quot;Year&quot;, 2018);</div><div class="line">// require(&#39;example&#39;).Angle -&gt; 60.058</div><div class="line">example.pushDouble(&quot;Angle&quot;, 60.058);</div><div class="line">Brew::API::addModule(example);</div></div><!-- fragment --><ul>
<li>For more information, browse the documentation. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
